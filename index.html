<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerando arquivo json</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
        }

        .right-half {
            flex: 1;                /* Each takes up 50% of the width */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            color: black;
            background-color: #ff9966;
        }

        .left-half {
            flex: 1;               /* Each takes up 50% of the width */
            /*display: flex;*/
            justify-content: center;
            align-items: center;
            font-size: 1rem;
            color: black;
            background-color: #6699ff;
        }

        .left-box {
            border: 2px solid black;
            padding: 20px;
            margin: 20px;
            background-color: #ffffff;
        }

        .button {
            display: block;
            margin-left: auto;
            margin-right: auto;
            padding: 15px 25px;
            font-size: 20px;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            outline: none;
            color: #fff;
            background-color: #04AA6D;
            border: none;
            border-radius: 15px;
            box-shadow: 0 9px #999;
            width: 50%;
            height: 8%;
        }

        .button:hover {background-color: #3e8e41}

        .button:active {
            background-color: #3e8e41;
            box-shadow: 0 5px #666;
            transform: translateY(4px);
        }

        textarea {
            width: 100%;           /* fill the container */
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <div class="left-half">
        <div class="left-box">
            Enunciado da questão<br>
            <textarea id="enunciado" name="enunciado" rows="4" cols="50" placeholder="Qual é a raiz quadrada de 25?"></textarea>
            <p>Alternativa A:<br>
            <textarea id="alternativaA" name="alternativaA" rows="1" cols="50" placeholder="3"></textarea>
            <p>Alternativa B:</p>
            <textarea id="alternativaB" name="alternativaB" rows="1" cols="50" placeholder="4"></textarea> 
            <p>Alternativa C:</p>
            <textarea id="alternativaC" name="alternativaC" rows="1" cols="50" placeholder="5"></textarea> 
            <p>Alternativa D:</p>
            <textarea id="alternativaD" name="alternativaD" rows="1" cols="50" placeholder="6"></textarea> 
            <p>Resposta Correta:</p>
            <textarea id="resposta" name="resposta" rows="1" cols="50" placeholder="c"></textarea> 
        </div>

        <button class="button" onclick="addQuestao()">Adicionar Questão</button>
        <br><br>
    </div>
    <div class="right-half">
        <div class="right-box">
            <textarea id="arquivo" name="arquivo" rows="30" cols="80" placeholder="3"></textarea>
        </div>

        <p></p>
        <br><br>
    </div>

    <script>
        async function addQuestao() {
            // pegando e parseando os valores dos campos
            let enunciado = document.getElementById(`enunciado`).value;
            enunciado = enunciado.replace(/!/g, '\"');
            
            let alternativaA = document.getElementById(`alternativaA`).value;
            alternativaA = alternativaA.replace(/!/g, '\"');

            let alternativaB = document.getElementById(`alternativaB`).value;
            alternativaB = alternativaB.replace(/!/g, '\"');

            let alternativaC = document.getElementById(`alternativaC`).value;
            alternativaC = alternativaC.replace(/!/g, '\"');

            let alternativaD = document.getElementById(`alternativaD`).value;
            alternativaD = alternativaD.replace(/!/g, '\"');

            let resposta = document.getElementById(`resposta`).value;
            resposta = resposta.replace(/!/g, '\"');

            // escrevendo no console (para testes)
            console.log(enunciado, alternativaA, alternativaB, alternativaC, alternativaD, resposta);

            // modelo de questão em json
            let questao = {
                "enunciado": enunciado,
                    "a": alternativaA,
                    "b": alternativaB,
                    "c": alternativaC,
                    "d": alternativaD,
                "resposta": resposta
            };

            // pegando o valor da textarea do arquivo
            let arquivo = document.getElementById("arquivo").value;

            // escrevendo na textarea do arquivo
            if (arquivo.length == 0) {
                console.log("arquivo vazio");
                arquivo = "[" + JSON.stringify(questao, null, 4) + "]";
            } else {
                arquivo = arquivo.slice(1, -1);
                arquivo = arquivo + "," + JSON.stringify(questao, null, 4);
                arquivo = "[" + arquivo + "]";
            }

            // atualizando a página
            document.getElementById("arquivo").value = arquivo;
        }
    </script>
</body>
</html>
